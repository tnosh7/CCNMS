<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="myPage">
	<select id="selectOneUserDetail" parameterType="String" resultType="UserDTO">
		SELECT 
				*
		FROM 
				USER
		WHERE 
				USER_ID = #{userId}	
	</select>
	<select id="selectOneAuthenticationUser" parameterType="String" resultType="String">
		SELECT 
				PASSWD AS passwd
		FROM
				USER
		WHERE
				USER_ID = #{userId}
	</select>
	
	<update id="updateUser" parameterType="UserDTO">
		UPDATE USER
		<set>
			<if test='profile != null and !profile.equals("")'>
			PROFILE = #{profile},
			</if >
			<if test='userId != null and !userId.equals("")'>	
			USER_ID = #{userId},
			</if>
			<if test='userNm != null and !userNm.equals("")'>
			USER_NM  = #{userNm},
			</if>
				<if test='email != null and !email.equals("")'>
			EMAIL  = #{email},
			</if>
				<if test='birthDT != null and !birthDT.equals("")'>
			BIRTH_DT  = #{birthDT}, 
			</if>
				<if test='hp != null and !hp.equals("")'>
			HP  = #{hp},
			</if>
				<if test='zipcode != null and !zipcode.equals("")'>
			ZIPCODE  = #{zipcode},
			</if>
				<if test='roadAddress != null and !roadAddress.equals("")'>
			ROADADDRESS  = #{roadAddress},
			</if>
				<if test='jibunAddress != null and !jibunAddress.equals("")'>
			JIBUNADDRES  = #{jibunAddress},
			</if>
				<if test='namujiAddress != null and !namujiAddress !=""'>
			NAMUJIADDRESS  = #{namujiAddress},
			</if>
		</set>
		WHERE 
			USER_ID = #{userId}
	</update>
</mapper>